{% extends "base.html" %} {% block title %}NGO Dashboard - Food Wastage
Reduction App{% endblock %} {% block content %}
<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center mt-4 mb-4">
        <h2>
          <i class="bi bi-house"></i> NGO Dashboard
          <small class="text-muted">Welcome, {{ current_user.name }}!</small>
        </h2>
        <a
          href="{{ url_for('donations.list_donations') }}"
          class="btn btn-success"
        >
          <i class="bi bi-search"></i> Browse All Donations
        </a>
      </div>

      <!-- Quick Actions -->
      <div class="row mb-4">
        <div class="col-md-6">
          <div class="card border-success">
            <div class="card-body text-center">
              <i class="bi bi-search display-4 text-success"></i>
              <h5 class="card-title mt-2">Find Donations</h5>
              <p class="card-text">
                Browse and claim available food donations in your area.
              </p>
              <a
                href="{{ url_for('donations.list_donations', available='true') }}"
                class="btn btn-success"
              >
                <i class="bi bi-clock"></i> Available Now
              </a>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card border-info">
            <div class="card-body text-center">
              <i class="bi bi-check-circle display-4 text-info"></i>
              <h5 class="card-title mt-2">Your Claims</h5>
              <p class="card-text">
                View and manage the donations you have claimed.
              </p>
              <span class="badge bg-info fs-6"
                >{{ claimed_donations|length }} Active Claims</span
              >
            </div>
          </div>
        </div>
      </div>

      <!-- Available Donations -->
      {% if available_donations %}
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="bi bi-clock text-success"></i> Latest Available Donations
          </h5>
        </div>
        <div class="card-body">
          <div class="row">
            {% for donation in available_donations[:6] %}
            <div class="col-lg-4 col-md-6 mb-3">
              <div class="card card-hover h-100">
                <div class="card-body">
                  <h6 class="card-title">{{ donation.title }}</h6>
                  <p class="card-text small">
                    {{ donation.description[:80] }}{% if
                    donation.description|length > 80 %}...{% endif %}
                  </p>
                  <div class="mb-2">
                    <span class="badge bg-primary"
                      >{{ donation.food_type }}</span
                    >
                    <span class="badge bg-info">{{ donation.quantity }}</span>
                  </div>
                  <div class="text-muted small mb-2">
                    <i class="bi bi-geo-alt"></i> {{ donation.address[:30] }}{%
                    if donation.address|length > 30 %}...{% endif %}
                  </div>
                  <div class="text-muted time-left small mb-2">
                    <i class="bi bi-clock"></i> {{ donation|time_left }}
                  </div>
                  <a
                    href="{{ url_for('donations.detail', id=donation.id) }}"
                    class="btn btn-outline-success btn-sm w-100"
                  >
                    <i class="bi bi-eye"></i> View & Claim
                  </a>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>

          {% if available_donations|length > 6 %}
          <div class="text-center">
            <a
              href="{{ url_for('donations.list_donations') }}"
              class="btn btn-outline-success"
            >
              View All {{ available_donations|length }} Available Donations
              <i class="bi bi-arrow-right"></i>
            </a>
          </div>
          {% endif %}
        </div>
      </div>
      {% endif %}

      <!-- Claimed Donations -->
      {% if claimed_donations %}
      <div class="card">
        <div class="card-header">
          <h5 class="mb-0">
            <i class="bi bi-check-circle text-warning"></i> Your Claimed
            Donations
          </h5>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Title</th>
                  <th>Restaurant</th>
                  <th>Status</th>
                  <th>Claimed Date</th>
                  <th>Contact</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for donation in claimed_donations %}
                <tr>
                  <td>
                    <strong>{{ donation.title }}</strong><br />
                    <small class="text-muted"
                      >{{ donation.food_type }} â€¢ {{ donation.quantity }}</small
                    >
                  </td>
                  <td>{{ donation.restaurant.name }}</td>
                  <td>
                    {% if donation.status == 'completed' %}
                    <span class="badge bg-success">
                      <i class="bi bi-check-circle-fill"></i> Completed
                    </span>
                    {% else %}
                    <span class="badge bg-warning">
                      <i class="bi bi-clock"></i> Pending Pickup
                    </span>
                    {% endif %}
                  </td>
                  <td>{{ donation.claimed_at.strftime('%m/%d %H:%M') }}</td>
                  <td>
                    <a
                      href="mailto:{{ donation.restaurant.email }}"
                      class="btn btn-outline-primary btn-sm"
                    >
                      <i class="bi bi-envelope"></i>
                    </a>
                  </td>
                  <td>
                    <a
                      href="{{ url_for('donations.detail', id=donation.id) }}"
                      class="btn btn-outline-primary btn-sm"
                    >
                      <i class="bi bi-eye"></i> View
                    </a>
                  </td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
      {% endif %} {% if not available_donations and not claimed_donations %}
      <div class="text-center py-5">
        <i class="bi bi-search display-1 text-muted"></i>
        <h4 class="mt-3">Start Making a Difference</h4>
        <p class="text-muted">
          Browse available food donations and help reduce waste while feeding
          those in need.
        </p>
        <a
          href="{{ url_for('donations.list_donations') }}"
          class="btn btn-success"
        >
          <i class="bi bi-search"></i> Browse Donations
        </a>
      </div>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
